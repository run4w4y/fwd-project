<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Portfolio</title>
        <link rel="stylesheet" href="styles.css">
    </head>
    <body>
        <header>
            <nav>
                <ul class="navbar-links">
                    <li>
                        <a href="/index.html"> Home </a>
                    </li>
                    <li>
                        <a href="/about.html"> About </a>
                    </li>
                    <li>
                        <a href="/contacts.html"> Contacts </a>
                    </li>
                </ul>
            </nav>
        </header>
        <main>
            <h1> Hello, my name is Vadim </h1>
            <p> Any details such as age, occupation or city. </p>
            <p> Example: 23 y.o. designer from San Francisco </p>
            <h2> My very cool projects </h2>
            <ol>
                <li> <a href="/project1.html"> Project 1 </a> </li>
                <li> <a href="/project2.html"> Project 2 </a> </li>
                <li> <a href="/project3.html"> Project 3 </a> </li>
            </ol>
            <h2> My very cool socials </h2>
            <ul class="socials">
                <li>
                    <a href="https://t.me/run4w4y" id="tg-link"> 
                        <img src="icons/gh.svg" class="socials-icon" /> 
                    </a>
                </li>
                <li>
                    <a href="https://github.com/run4w4y" id="gh-link">
                        <img src="icons/tg.svg" class="socials-icon" /> 
                    </a>
                </li>
                <li>
                    <a href="mailto:add4che@gmail.com" id="email">
                        <img src="icons/mail.svg" class="socials-icon" /> 
                    </a>
                </li>
            </ul>
            <h2> XKCD </h2>
            <h3 id="xkcd-text"></h3>
            <img id="xkcd-img" />
        </main>
        <script>
            window.onload = async () => {
                const xkcdImg = document.querySelector('#xkcd-img')
                const xkcdText = document.querySelector('#xkcd-text')

                const fwdApiUrl = 'https://fwd.innopolis.app/api/hw2?' + new URLSearchParams({
                    email: 'va.makarov@innopolis.university',
                })
                const fwdApiRes = await fetch(fwdApiUrl)
                const id = await fwdApiRes.json()

                const xkcdApiUrl = `https://getxkcd.vercel.app/api/comic?num=${id}`
                const xkcdApiRes = await fetch(xkcdApiUrl)
                const xkcdComic = await xkcdApiRes.json()
                console.log(xkcdComic)

                xkcdImg.setAttribute('src', xkcdComic.img)
                xkcdImg.setAttribute('alt', xkcdComic.alt)
                const date = new Date(xkcdComic.year, xkcdComic.month, xkcdComic.day)
                xkcdText.textContent = `${xkcdComic.title} - ${date.toLocaleDateString()}`
            }
        </script>
    </body>
</html>